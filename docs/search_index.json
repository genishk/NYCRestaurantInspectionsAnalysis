[["index.html", "NYC Restaurant Inspections Analysis Chapter 1 Introduction", " NYC Restaurant Inspections Analysis Vishweshwar Tyagi, SeokHyun Kim 2021-12-12 Chapter 1 Introduction "],["data-sources.html", "Chapter 2 Data sources", " Chapter 2 Data sources "],["data-transformation.html", "Chapter 3 Data transformation", " Chapter 3 Data transformation Let us begin by loading the dataset ## CAMIS DBA BORO BUILDING STREET ZIPCODE PHONE ## 1 41393637 DELICIAS MEXICANAS Manhattan 2109 3 AVENUE 10029 2128283659 ## 2 50013433 BALVANERA Manhattan 152 STANTON STREET 10002 2125333348 ## 3 50008129 COCO FRESH TEA &amp; JUICE Queens 86-55 BROADWAY 11373 3477306730 ## 4 50100295 EL BURRITO NACHO II Brooklyn 747 FLUSHING AVENUE 11206 9292502087 ## 5 41696471 MAISON HARLEM RESTAURANT Manhattan 341 ST NICHOLAS AVENUE 10027 2122229224 ## 6 50098871 NORIBAR SUSHI Brooklyn 326 KINGSTON AVENUE 11213 3479138888 ## CUISINE.DESCRIPTION INSPECTION.DATE ACTION ## 1 Mexican 03/17/2017 Violations were cited in the following area(s). ## 2 Spanish 05/21/2019 Violations were cited in the following area(s). ## 3 Coffee/Tea 10/15/2018 Violations were cited in the following area(s). ## 4 Mexican 02/21/2020 Violations were cited in the following area(s). ## 5 French 01/28/2020 Violations were cited in the following area(s). ## 6 Jewish/Kosher 08/30/2021 Violations were cited in the following area(s). ## VIOLATION.CODE ## 1 10D ## 2 10D ## 3 10H ## 4 02G ## 5 06D ## 6 10F ## VIOLATION.DESCRIPTION ## 1 Mechanical or natural ventilation system not provided, improperly installed, in disrepair and/or fails to prevent excessive build-up of grease, heat, steam condensation vapors, odors, smoke, and fumes. ## 2 Mechanical or natural ventilation system not provided, improperly installed, in disrepair and/or fails to prevent excessive build-up of grease, heat, steam condensation vapors, odors, smoke, and fumes. ## 3 Proper sanitization not provided for utensil ware washing operation. ## 4 Cold food item held above 41쨘 F (smoked fish and reduced oxygen packaged foods above 38 쨘F) except during necessary preparation. ## 5 Food contact surface not properly washed, rinsed and sanitized after each use and following any activity when contamination may have occurred. ## 6 Non-food contact surface improperly constructed. Unacceptable material used. Non-food contact surface or equipment improperly maintained and/or not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides, above and underneath the unit. ## CRITICAL.FLAG SCORE GRADE GRADE.DATE RECORD.DATE INSPECTION.TYPE ## 1 Not Critical 11 A 03/17/2017 11/18/2021 Cycle Inspection / Initial Inspection ## 2 Not Critical 29 &lt;NA&gt; &lt;NA&gt; 11/18/2021 Cycle Inspection / Initial Inspection ## 3 Not Critical 22 &lt;NA&gt; &lt;NA&gt; 11/18/2021 Cycle Inspection / Initial Inspection ## 4 Critical 11 A 02/21/2020 11/18/2021 Pre-permit (Operational) / Re-inspection ## 5 Critical 32 &lt;NA&gt; &lt;NA&gt; 11/18/2021 Cycle Inspection / Initial Inspection ## 6 Not Critical 18 &lt;NA&gt; &lt;NA&gt; 11/18/2021 Cycle Inspection / Initial Inspection ## Latitude Longitude Community.Board Council.District Census.Tract BIN BBL NTA ## 1 40.79753 -73.94031 111 8 18800 1052516 1016650002 MN34 ## 2 40.72053 -73.98544 103 2 3001 1077440 1003550070 MN27 ## 3 40.73740 -73.87729 404 25 47300 4045397 4018427502 QN29 ## 4 40.70062 -73.94281 301 33 50700 3061516 3022760035 BK75 ## 5 40.81208 -73.95144 109 9 21303 1059391 1019540050 MN06 ## 6 40.66778 -73.94236 309 35 33500 3033372 3012780141 BK63 We will first drop the columns for which the creator has not provided any information as well as those columns which we believe are not useful for drawing insights. ## CAMIS DBA BORO STREET ZIPCODE CUISINE.DESCRIPTION ## 1 41393637 DELICIAS MEXICANAS Manhattan 3 AVENUE 10029 Mexican ## 2 50013433 BALVANERA Manhattan STANTON STREET 10002 Spanish ## 3 50008129 COCO FRESH TEA &amp; JUICE Queens BROADWAY 11373 Coffee/Tea ## 4 50100295 EL BURRITO NACHO II Brooklyn FLUSHING AVENUE 11206 Mexican ## 5 41696471 MAISON HARLEM RESTAURANT Manhattan ST NICHOLAS AVENUE 10027 French ## 6 50098871 NORIBAR SUSHI Brooklyn KINGSTON AVENUE 11213 Jewish/Kosher ## INSPECTION.DATE ACTION VIOLATION.CODE ## 1 03/17/2017 Violations were cited in the following area(s). 10D ## 2 05/21/2019 Violations were cited in the following area(s). 10D ## 3 10/15/2018 Violations were cited in the following area(s). 10H ## 4 02/21/2020 Violations were cited in the following area(s). 02G ## 5 01/28/2020 Violations were cited in the following area(s). 06D ## 6 08/30/2021 Violations were cited in the following area(s). 10F ## VIOLATION.DESCRIPTION ## 1 Mechanical or natural ventilation system not provided, improperly installed, in disrepair and/or fails to prevent excessive build-up of grease, heat, steam condensation vapors, odors, smoke, and fumes. ## 2 Mechanical or natural ventilation system not provided, improperly installed, in disrepair and/or fails to prevent excessive build-up of grease, heat, steam condensation vapors, odors, smoke, and fumes. ## 3 Proper sanitization not provided for utensil ware washing operation. ## 4 Cold food item held above 41쨘 F (smoked fish and reduced oxygen packaged foods above 38 쨘F) except during necessary preparation. ## 5 Food contact surface not properly washed, rinsed and sanitized after each use and following any activity when contamination may have occurred. ## 6 Non-food contact surface improperly constructed. Unacceptable material used. Non-food contact surface or equipment improperly maintained and/or not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides, above and underneath the unit. ## CRITICAL.FLAG SCORE GRADE INSPECTION.TYPE Latitude Longitude ## 1 Not Critical 11 A Cycle Inspection / Initial Inspection 40.79753 -73.94031 ## 2 Not Critical 29 &lt;NA&gt; Cycle Inspection / Initial Inspection 40.72053 -73.98544 ## 3 Not Critical 22 &lt;NA&gt; Cycle Inspection / Initial Inspection 40.73740 -73.87729 ## 4 Critical 11 A Pre-permit (Operational) / Re-inspection 40.70062 -73.94281 ## 5 Critical 32 &lt;NA&gt; Cycle Inspection / Initial Inspection 40.81208 -73.95144 ## 6 Not Critical 18 &lt;NA&gt; Cycle Inspection / Initial Inspection 40.66778 -73.94236 Let us rename each column to its shorter version for easier access We will separate out inspection type into two columns denoting inspection program and inspection type ## camis dba boro street zip cuisine insp.date ## 1 41393637 DELICIAS MEXICANAS Manhattan 3 AVENUE 10029 Mexican 03/17/2017 ## 2 50013433 BALVANERA Manhattan STANTON STREET 10002 Spanish 05/21/2019 ## 3 50008129 COCO FRESH TEA &amp; JUICE Queens BROADWAY 11373 Coffee/Tea 10/15/2018 ## 4 50100295 EL BURRITO NACHO II Brooklyn FLUSHING AVENUE 11206 Mexican 02/21/2020 ## 5 41696471 MAISON HARLEM RESTAURANT Manhattan ST NICHOLAS AVENUE 10027 French 01/28/2020 ## 6 50098871 NORIBAR SUSHI Brooklyn KINGSTON AVENUE 11213 Jewish/Kosher 08/30/2021 ## action vio.code ## 1 Violations were cited in the following area(s). 10D ## 2 Violations were cited in the following area(s). 10D ## 3 Violations were cited in the following area(s). 10H ## 4 Violations were cited in the following area(s). 02G ## 5 Violations were cited in the following area(s). 06D ## 6 Violations were cited in the following area(s). 10F ## vio.desc ## 1 Mechanical or natural ventilation system not provided, improperly installed, in disrepair and/or fails to prevent excessive build-up of grease, heat, steam condensation vapors, odors, smoke, and fumes. ## 2 Mechanical or natural ventilation system not provided, improperly installed, in disrepair and/or fails to prevent excessive build-up of grease, heat, steam condensation vapors, odors, smoke, and fumes. ## 3 Proper sanitization not provided for utensil ware washing operation. ## 4 Cold food item held above 41쨘 F (smoked fish and reduced oxygen packaged foods above 38 쨘F) except during necessary preparation. ## 5 Food contact surface not properly washed, rinsed and sanitized after each use and following any activity when contamination may have occurred. ## 6 Non-food contact surface improperly constructed. Unacceptable material used. Non-food contact surface or equipment improperly maintained and/or not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides, above and underneath the unit. ## flag score grade insp.prog insp.type latitude longitude ## 1 Not Critical 11 A Cycle Inspection Initial Inspection 40.79753 -73.94031 ## 2 Not Critical 29 &lt;NA&gt; Cycle Inspection Initial Inspection 40.72053 -73.98544 ## 3 Not Critical 22 &lt;NA&gt; Cycle Inspection Initial Inspection 40.73740 -73.87729 ## 4 Critical 11 A Pre-permit (Operational) Re-inspection 40.70062 -73.94281 ## 5 Critical 32 &lt;NA&gt; Cycle Inspection Initial Inspection 40.81208 -73.95144 ## 6 Not Critical 18 &lt;NA&gt; Cycle Inspection Initial Inspection 40.66778 -73.94236 Consider the unique values in borough ## ## 0 210 Bronx Brooklyn Manhattan Queens Staten Island ## 118 2 35564 97059 149598 88597 12261 ‘0’ borough is vague, we’ll drop these rows: ## [1] &quot;There are 118 rows with 0 as the borough&quot; Consider the unique values in grade column: ## ## 01/03/2019 01/03/2020 A B C G N P ## 1 1 152011 23514 9222 1 4889 2487 ## Z ## 1324 As per the data dictionary, grade value ‘G’ is not defined. Since only one row contains this, we can get rid of this row. ## camis dba boro street zip cuisine insp.date action ## &quot;integer&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; ## vio.code vio.desc flag score grade insp.prog insp.type latitude ## &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;numeric&quot; ## longitude ## &quot;numeric&quot; ## camis dba boro street zip cuisine insp.date action ## &quot;factor&quot; &quot;factor&quot; &quot;factor&quot; &quot;character&quot; &quot;factor&quot; &quot;factor&quot; &quot;Date&quot; &quot;factor&quot; ## vio.code vio.desc flag score grade insp.prog insp.type latitude ## &quot;factor&quot; &quot;factor&quot; &quot;factor&quot; &quot;character&quot; &quot;factor&quot; &quot;factor&quot; &quot;factor&quot; &quot;numeric&quot; ## longitude ## &quot;numeric&quot; We will now drop the duplicate rows ## [1] &quot;Number of rows originally: 383080&quot; ## [1] &quot;Number of rows after removing duplicates: 360458&quot; We will replace lengthy categories in ‘action’ by keywords ## ## Establishment Closed by DOHMH. Violations were cited in the following area(s) and those requiring immediate action were addressed. ## 14427 ## Establishment re-closed by DOHMH. ## 65 ## Establishment re-opened by DOHMH. ## 3867 ## No violations were recorded at the time of this inspection. ## 4463 ## Violations were cited in the following area(s). ## 333309 ## ## closed reclosed reopened no violations violations ## 14427 65 3867 4463 333309 Let us now save this cleaned dataset "],["missing-values.html", "Chapter 4 Missing values 4.1 Transformation", " Chapter 4 Missing values Let us analyze the missing patterns in our data frame According to the output of plot_missing function, we can confirm that there are a total of 29 missing patterns in our dataset. But if we look at plots in detail, the most common pattern is the one that has no missing values, followed by the pattern with missing values only in the ‘grade’ column. These two cases account for almost all of the most frequent missing patterns. We can also infer from the upper side plot that ‘grade’ has about 50% of its missing values and all other columns have relatively much fewer proportions of missing values. Since there are so many rows with missing values in ‘grade’, dropping these rows would not make sense. Instead, we will try to impute the ‘grade’ column values by finding exciting patterns in the dataset in further exploration. Let us now try to see how many rows have a given number of missing values. We can see that most of the rows in our dataset either have no missing values or have exactly one missing value. The reason for this is evident from the missing-patterns plot we showed above; since the column ‘grade’ has so many missing values. This will be fixed when we impute the values for ‘grade’. We will consider dropping rows with more than five missing values; this is reasonable as these rows are relatively less in quantity. To better understand the pattern of missing values, we have to check for any placeholders for missing values. A nice strategy for this is to look for outliers. Let us try to see when most of the inspections were conducted. Here, we can see that the inspection date with year = 1900 is an outlier and possibly a placeholder for missing values. We confirm below by analyzing the missing patterns of the subset of our dataset with the inspection year 1900. We can see that most of the data in rows with the inspection year equal to 1900 is missing. Therefore, we will consider dropping these rows. Let us try to understand if there’s any relation between missing-patterns and borough. ## [1] Queens Brooklyn Manhattan Bronx Staten Island ## Levels: Bronx Brooklyn Manhattan Queens Staten Island We can see that none of these seem to display any relation between missing-patterns and boroughs, which is worth investigating further. 4.1 Transformation We drop the rows that have 1900 as their inspection year ## camis dba boro street zip cuisine ## 1 41170643 LITTLE MOROCCO RESTAURANT Queens STEINWAY STREET 11103 Moroccan ## 2 41610426 GLOW THAI RESTAURANT Brooklyn 3 AVENUE 11209 Thai ## 3 41711813 BEDFORD FALLS Manhattan EAST 67 STREET 10065 American ## 4 41429907 MARIO&#39;S DELI Brooklyn NASSAU AVENUE 11222 American ## 5 41624260 ZENG&#39;S RESTAURANT Brooklyn FOURTH AVENUE 11232 Chinese ## 6 41530091 JOY &amp; SNOOK RESTAURANT AND BAKERY Brooklyn NOSTRAND AVENUE 11216 Caribbean ## insp_date action vio_code ## 1 2019-11-04 violations 05H ## 2 2019-08-29 violations 08A ## 3 2016-07-22 violations 10I ## 4 2019-08-30 violations 04F ## 5 2018-12-10 violations 06D ## 6 2017-10-03 violations 22F ## vio_desc ## 1 No facilities available to wash, rinse and sanitize utensils and/or equipment. ## 2 Facility not vermin proof. Harborage or conditions conducive to attracting vermin to the premises and/or allowing vermin to exist. ## 3 Single service item reused, improperly stored, dispensed; not used when required. ## 4 Food, food preparation area, food storage area, area used by employees or patrons, contaminated by sewage or liquid waste. ## 5 Food contact surface not properly washed, rinsed and sanitized after each use and following any activity when contamination may have occurred. ## 6 MISBRANDED AND LABELING ## flag score grade insp_prog insp_type latitude longitude ## 1 Critical 37 &lt;NA&gt; Cycle Inspection Initial Inspection 40.76848 -73.91123 ## 2 Not Critical 9 A Cycle Inspection Re-inspection 40.63386 -74.02680 ## 3 Not Critical 9 A Cycle Inspection Initial Inspection 40.76636 -73.96250 ## 4 Critical 13 A Cycle Inspection Re-inspection 40.72597 -73.94060 ## 5 Critical 28 C Cycle Inspection Re-inspection 40.65439 -74.00434 ## 6 Not Critical 29 &lt;NA&gt; Cycle Inspection Initial Inspection 40.67266 -73.95025 Further, consider ## insp_year n ## 1 2009 1 ## 2 2013 8 ## 3 2014 15 ## 4 2015 116 ## 5 2016 10400 ## 6 2017 57401 ## 7 2018 98407 ## 8 2019 136652 ## 9 2020 29512 ## 10 2021 24635 We can see that there are very few observations from the years before 2016. In order to draw meaningful insights, we shall drop all rows with inspection year less than 2016 as we have very less data from this time period. Hence, we’ll analyse only the subset with inspection year from 2016 to 2021. Let us now save this dataset for further analysis ## camis dba boro street zip cuisine ## 1 41170643 LITTLE MOROCCO RESTAURANT Queens STEINWAY STREET 11103 Moroccan ## 2 41610426 GLOW THAI RESTAURANT Brooklyn 3 AVENUE 11209 Thai ## 3 41711813 BEDFORD FALLS Manhattan EAST 67 STREET 10065 American ## 4 41429907 MARIO&#39;S DELI Brooklyn NASSAU AVENUE 11222 American ## 5 41624260 ZENG&#39;S RESTAURANT Brooklyn FOURTH AVENUE 11232 Chinese ## 6 41530091 JOY &amp; SNOOK RESTAURANT AND BAKERY Brooklyn NOSTRAND AVENUE 11216 Caribbean ## insp_date action vio_code ## 1 2019-11-04 violations 05H ## 2 2019-08-29 violations 08A ## 3 2016-07-22 violations 10I ## 4 2019-08-30 violations 04F ## 5 2018-12-10 violations 06D ## 6 2017-10-03 violations 22F ## vio_desc ## 1 No facilities available to wash, rinse and sanitize utensils and/or equipment. ## 2 Facility not vermin proof. Harborage or conditions conducive to attracting vermin to the premises and/or allowing vermin to exist. ## 3 Single service item reused, improperly stored, dispensed; not used when required. ## 4 Food, food preparation area, food storage area, area used by employees or patrons, contaminated by sewage or liquid waste. ## 5 Food contact surface not properly washed, rinsed and sanitized after each use and following any activity when contamination may have occurred. ## 6 MISBRANDED AND LABELING ## flag score grade insp_prog insp_type latitude longitude ## 1 Critical 37 &lt;NA&gt; Cycle Inspection Initial Inspection 40.76848 -73.91123 ## 2 Not Critical 9 A Cycle Inspection Re-inspection 40.63386 -74.02680 ## 3 Not Critical 9 A Cycle Inspection Initial Inspection 40.76636 -73.96250 ## 4 Critical 13 A Cycle Inspection Re-inspection 40.72597 -73.94060 ## 5 Critical 28 C Cycle Inspection Re-inspection 40.65439 -74.00434 ## 6 Not Critical 29 &lt;NA&gt; Cycle Inspection Initial Inspection 40.67266 -73.95025 "],["results.html", "Chapter 5 Results", " Chapter 5 Results "],["interactive-component.html", "Chapter 6 Interactive component", " Chapter 6 Interactive component https://vishweshwar.shinyapps.io/NYCRestaurantsInspectionAnalysis/ "],["conclusion.html", "Chapter 7 Conclusion", " Chapter 7 Conclusion "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
